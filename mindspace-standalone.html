<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindSpace - Mental Wellness Companion</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f7; 
            color: #1d1d1f;
            line-height: 1.5;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .card { 
            background: rgba(255, 255, 255, 0.8); 
            backdrop-filter: blur(20px);
            border-radius: 16px; 
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .btn-primary { 
            background: #007AFF; 
            color: white; 
            padding: 12px 24px; 
            border-radius: 12px; 
            border: none; 
            cursor: pointer; 
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .btn-primary:hover { background: #0056CC; transform: translateY(-1px); }
        .btn-secondary { 
            background: rgba(255, 255, 255, 0.8); 
            color: #1d1d1f; 
            padding: 12px 24px; 
            border-radius: 12px; 
            border: 1px solid rgba(0, 0, 0, 0.1); 
            cursor: pointer; 
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .btn-secondary:hover { background: rgba(255, 255, 255, 1); }
        .mood-btn { 
            padding: 16px 24px; 
            border-radius: 16px; 
            border: 2px solid transparent; 
            cursor: pointer; 
            transition: all 0.3s ease;
            font-weight: 500;
            text-align: center;
        }
        .mood-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); }
        .mood-great { background: linear-gradient(135deg, #FFD60A, #FF9500); color: white; }
        .mood-good { background: linear-gradient(135deg, #30D158, #00C7BE); color: white; }
        .mood-neutral { background: linear-gradient(135deg, #8E8E93, #636366); color: white; }
        .mood-struggling { background: linear-gradient(135deg, #007AFF, #5856D6); color: white; }
        .mood-selected { border-color: #007AFF; box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.2); }
        .header { 
            background: rgba(255, 255, 255, 0.8); 
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        .sidebar { 
            background: rgba(255, 255, 255, 0.8); 
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }
        .nav-item { 
            padding: 12px 20px; 
            border-radius: 12px; 
            margin: 4px 0;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        .nav-item:hover { background: rgba(0, 122, 255, 0.1); }
        .nav-item.active { background: #007AFF; color: white; }
        .input-field { 
            width: 100%; 
            padding: 16px; 
            border: 1px solid rgba(0, 0, 0, 0.1); 
            border-radius: 12px; 
            background: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            transition: all 0.2s ease;
        }
        .input-field:focus { 
            outline: none; 
            border-color: #007AFF; 
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.1);
        }
        .stats-card { 
            background: rgba(255, 255, 255, 0.8); 
            backdrop-filter: blur(20px);
            border-radius: 16px; 
            padding: 24px; 
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .crisis-alert { 
            background: linear-gradient(135deg, #FF3B30, #FF6B6B); 
            color: white; 
            border-radius: 16px; 
            padding: 20px;
        }
        .insight-card { 
            background: linear-gradient(135deg, #007AFF, #5856D6); 
            color: white; 
            border-radius: 16px; 
            padding: 20px;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Storage utilities
        const storage = {
            save: (key, data) => localStorage.setItem(key, JSON.stringify(data)),
            load: (key) => {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            }
        };

        // Main App Component
        function MindSpaceApp() {
            const [currentView, setCurrentView] = useState('dashboard');
            const [moodEntries, setMoodEntries] = useState(storage.load('moodEntries') || []);
            const [journalEntries, setJournalEntries] = useState(storage.load('journalEntries') || []);
            const [goals, setGoals] = useState(storage.load('goals') || []);

            // Save data when it changes
            useEffect(() => {
                storage.save('moodEntries', moodEntries);
            }, [moodEntries]);

            useEffect(() => {
                storage.save('journalEntries', journalEntries);
            }, [journalEntries]);

            useEffect(() => {
                storage.save('goals', goals);
            }, [goals]);

            const renderView = () => {
                switch(currentView) {
                    case 'dashboard': return <Dashboard moodEntries={moodEntries} setMoodEntries={setMoodEntries} />;
                    case 'journal': return <Journal journalEntries={journalEntries} setJournalEntries={setJournalEntries} />;
                    case 'cbt': return <CBTExercises />;
                    case 'crisis': return <CrisisSupport />;
                    case 'goals': return <Goals goals={goals} setGoals={setGoals} />;
                    case 'settings': return <Settings />;
                    default: return <Dashboard moodEntries={moodEntries} setMoodEntries={setMoodEntries} />;
                }
            };

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="header">
                        <div className="container">
                            <div className="flex justify-between items-center py-6">
                                <div className="flex items-center">
                                    <h1 className="text-2xl font-semibold text-gray-900">MindSpace</h1>
                                </div>
                                <div className="text-sm text-gray-600 font-medium">Mental Wellness Platform</div>
                            </div>
                        </div>
                    </header>

                    <div className="flex">
                        {/* Sidebar */}
                        <nav className="w-64 sidebar min-h-screen p-6">
                            <div className="space-y-1">
                                {[
                                    { id: 'dashboard', label: 'Dashboard' },
                                    { id: 'journal', label: 'Journal' },
                                    { id: 'cbt', label: 'CBT Exercises' },
                                    { id: 'crisis', label: 'Crisis Support' },
                                    { id: 'goals', label: 'Goals & Habits' },
                                    { id: 'settings', label: 'Settings' }
                                ].map(item => (
                                    <button
                                        key={item.id}
                                        onClick={() => setCurrentView(item.id)}
                                        className={`w-full text-left nav-item ${
                                            currentView === item.id ? 'active' : ''
                                        }`}
                                    >
                                        {item.label}
                                    </button>
                                ))}
                            </div>
                        </nav>

                        {/* Main Content */}
                        <main className="flex-1 p-8">
                            {renderView()}
                        </main>
                    </div>
                </div>
            );
        }

        // Dashboard Component
        function Dashboard({ moodEntries, setMoodEntries }) {
            const [selectedMood, setSelectedMood] = useState('');
            const [moodNotes, setMoodNotes] = useState('');

            const moodOptions = [
                { id: 'great', label: 'Excellent', class: 'mood-great' },
                { id: 'good', label: 'Good', class: 'mood-good' },
                { id: 'neutral', label: 'Neutral', class: 'mood-neutral' },
                { id: 'struggling', label: 'Challenging', class: 'mood-struggling' }
            ];

            const handleMoodSubmit = () => {
                if (selectedMood) {
                    const newEntry = {
                        id: Date.now(),
                        mood: selectedMood,
                        notes: moodNotes,
                        date: new Date().toISOString().split('T')[0],
                        timestamp: new Date().toISOString()
                    };
                    setMoodEntries(prev => [newEntry, ...prev]);
                    setSelectedMood('');
                    setMoodNotes('');
                    alert('Mood recorded successfully!');
                }
            };

            const getMoodStats = () => {
                const last7Days = moodEntries.slice(0, 7);
                const avgMood = last7Days.length > 0 
                    ? last7Days.reduce((sum, entry) => {
                        const scores = { great: 4, good: 3, neutral: 2, struggling: 1 };
                        return sum + (scores[entry.mood] || 0);
                    }, 0) / last7Days.length 
                    : 0;
                return { streak: last7Days.length, avgMood: avgMood.toFixed(1) };
            };

            const stats = getMoodStats();

            return (
                <div className="space-y-6">
                    <div className="card p-6">
                        <h2 className="text-2xl font-bold text-gray-900 mb-4">Welcome to MindSpace</h2>
                        <p className="text-gray-600">Track your mental wellness journey with personalized tools and insights.</p>
                    </div>

                    {/* Mood Check-in */}
                    <div className="card p-6">
                        <h3 className="text-xl font-semibold text-gray-900 mb-4">How are you feeling today?</h3>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            {moodOptions.map(mood => (
                                <button
                                    key={mood.id}
                                    onClick={() => setSelectedMood(mood.id)}
                                    className={`mood-btn ${mood.class} ${selectedMood === mood.id ? 'mood-selected' : ''}`}
                                >
                                    <div className="font-semibold text-lg">{mood.label}</div>
                                </button>
                            ))}
                        </div>
                        <textarea
                            value={moodNotes}
                            onChange={(e) => setMoodNotes(e.target.value)}
                            placeholder="Add any notes about your mood (optional)"
                            className="input-field mb-6"
                            rows="3"
                        />
                        <button
                            onClick={handleMoodSubmit}
                            disabled={!selectedMood}
                            className="btn-primary disabled:opacity-50"
                        >
                            Record Mood
                        </button>
                    </div>

                    {/* Quick Stats */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div className="stats-card">
                            <div className="text-4xl font-bold text-blue-600 mb-2">{stats.streak}</div>
                            <div className="text-gray-600 font-medium">Day Streak</div>
                        </div>
                        <div className="stats-card">
                            <div className="text-4xl font-bold text-green-600 mb-2">{stats.avgMood}</div>
                            <div className="text-gray-600 font-medium">Average Mood</div>
                        </div>
                        <div className="stats-card">
                            <div className="text-4xl font-bold text-purple-600 mb-2">{moodEntries.length}</div>
                            <div className="text-gray-600 font-medium">Total Entries</div>
                        </div>
                    </div>

                    {/* Recent Entries */}
                    {moodEntries.length > 0 && (
                        <div className="card p-6">
                            <h3 className="text-xl font-semibold text-gray-900 mb-4">Recent Mood Entries</h3>
                            <div className="space-y-3">
                                {moodEntries.slice(0, 5).map(entry => {
                                    const mood = moodOptions.find(m => m.id === entry.mood);
                                    return (
                                        <div key={entry.id} className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                            <div className="flex items-center">
                                                <div className="w-3 h-3 rounded-full mr-4" style={{backgroundColor: mood?.id === 'great' ? '#FFD60A' : mood?.id === 'good' ? '#30D158' : mood?.id === 'neutral' ? '#8E8E93' : '#007AFF'}}></div>
                                                <div>
                                                    <div className="font-semibold">{mood?.label}</div>
                                                    <div className="text-sm text-gray-600">{entry.date}</div>
                                                </div>
                                            </div>
                                            {entry.notes && (
                                                <div className="text-sm text-gray-600 max-w-xs truncate">
                                                    {entry.notes}
                                                </div>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Journal Component
        function Journal({ journalEntries, setJournalEntries }) {
            const [journalText, setJournalText] = useState('');
            const [selectedMood, setSelectedMood] = useState('');
            const [crisisDetected, setCrisisDetected] = useState(false);

            const crisisKeywords = ['suicide', 'kill myself', 'end it all', 'hurt myself', 'want to die'];

            const detectCrisis = (text) => {
                return crisisKeywords.some(keyword => text.toLowerCase().includes(keyword));
            };

            const generateInsights = (content) => {
                const insights = [];
                const lowerContent = content.toLowerCase();
                
                if (detectCrisis(content)) {
                    setCrisisDetected(true);
                    insights.push('⚠️ We detected concerning content. Please consider reaching out for immediate support.');
                    return insights;
                }
                
                if (lowerContent.includes('grateful') || lowerContent.includes('thankful')) {
                    insights.push('Gratitude practice detected - this can boost your mood!');
                }
                if (lowerContent.includes('anxious') || lowerContent.includes('worried')) {
                    insights.push('Anxiety patterns noted - consider trying breathing exercises.');
                }
                if (lowerContent.includes('accomplished') || lowerContent.includes('proud')) {
                    insights.push('Celebrating achievements helps build self-confidence!');
                }
                
                return insights.length > 0 ? insights : ['Thank you for sharing your thoughts. Self-reflection is valuable.'];
            };

            const handleSaveEntry = () => {
                if (journalText.trim()) {
                    const insights = generateInsights(journalText);
                    const newEntry = {
                        id: Date.now(),
                        content: journalText,
                        mood: selectedMood,
                        insights: insights,
                        date: new Date().toISOString().split('T')[0],
                        timestamp: new Date().toISOString()
                    };
                    setJournalEntries(prev => [newEntry, ...prev]);
                    setJournalText('');
                    setSelectedMood('');
                    alert('Journal entry saved successfully!');
                }
            };

            const moodOptions = [
                { id: 'great', label: 'Great' },
                { id: 'good', label: 'Good' },
                { id: 'neutral', label: 'Neutral' },
                { id: 'struggling', label: 'Struggling' }
            ];

            return (
                <div className="space-y-6">
                    <div className="card p-6">
                        <h2 className="text-2xl font-bold text-gray-900 mb-4">AI-Powered Journal</h2>
                        <p className="text-gray-600">Write about your thoughts and feelings. Our AI will provide gentle insights.</p>
                    </div>

                    {/* Crisis Alert */}
                    {crisisDetected && (
                        <div className="crisis-alert">
                            <div className="flex items-center mb-3">
                                <h4 className="font-semibold text-lg">Crisis Support Available</h4>
                            </div>
                            <p className="text-sm mb-4 opacity-90">
                                We detected concerning content. Please know that help is available 24/7.
                            </p>
                            <div className="flex space-x-3">
                                <button 
                                    onClick={() => setCurrentView('crisis')}
                                    className="px-4 py-2 bg-white text-red-600 rounded-lg hover:bg-gray-100 text-sm font-medium"
                                >
                                    Get Crisis Support
                                </button>
                                <button 
                                    onClick={() => setCrisisDetected(false)}
                                    className="px-4 py-2 bg-transparent border border-white text-white rounded-lg hover:bg-white hover:text-red-600 text-sm font-medium"
                                >
                                    Dismiss
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Journal Entry Form */}
                    <div className="card p-6">
                        <h3 className="text-xl font-semibold text-gray-900 mb-4">New Entry</h3>
                        
                        <textarea
                            value={journalText}
                            onChange={(e) => setJournalText(e.target.value)}
                            placeholder="What's on your mind today? Share your thoughts, feelings, or experiences..."
                            className="w-full h-48 p-4 border border-gray-300 rounded-lg mb-4"
                        />
                        
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-2">Current Mood (optional)</label>
                            <div className="flex gap-2">
                                {moodOptions.map(mood => (
                                    <button
                                        key={mood.id}
                                        onClick={() => setSelectedMood(selectedMood === mood.id ? '' : mood.id)}
                                        className={`px-4 py-2 text-sm rounded-lg border transition-colors font-medium ${
                                            selectedMood === mood.id
                                                ? 'bg-blue-600 text-white border-blue-600'
                                                : 'bg-white text-gray-700 border-gray-300 hover:border-blue-400'
                                        }`}
                                    >
                                        {mood.label}
                                    </button>
                                ))}
                            </div>
                        </div>
                        
                        <button
                            onClick={handleSaveEntry}
                            disabled={!journalText.trim()}
                            className="btn-primary disabled:opacity-50"
                        >
                            Save Entry
                        </button>
                    </div>

                    {/* Recent Entries */}
                    {journalEntries.length > 0 && (
                        <div className="card p-6">
                            <h3 className="text-xl font-semibold text-gray-900 mb-4">Recent Entries</h3>
                            <div className="space-y-4">
                                {journalEntries.slice(0, 5).map(entry => {
                                    const mood = moodOptions.find(m => m.id === entry.mood);
                                    return (
                                        <div key={entry.id} className="border border-gray-200 rounded-lg p-4">
                                            <div className="flex items-center justify-between mb-2">
                                                <div className="flex items-center">
                                                    {mood && <span className="text-xl mr-2">{mood.emoji}</span>}
                                                    <span className="text-sm text-gray-600">{entry.date}</span>
                                                </div>
                                            </div>
                                            <p className="text-gray-800 mb-3">{entry.content}</p>
                                            {entry.insights && entry.insights.length > 0 && (
                                                <div className="bg-blue-50 border border-blue-200 rounded-lg p-3">
                                                    <h5 className="font-medium text-blue-900 mb-1">AI Insights:</h5>
                                                    {entry.insights.map((insight, index) => (
                                                        <p key={index} className="text-blue-800 text-sm">{insight}</p>
                                                    ))}
                                                </div>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // CBT Exercises Component
        function CBTExercises() {
            const [activeExercise, setActiveExercise] = useState(null);
            const [thoughtRecord, setThoughtRecord] = useState({
                situation: '',
                thoughts: '',
                emotions: '',
                behaviors: '',
                evidence_for: '',
                evidence_against: '',
                balanced_thought: ''
            });

            const exercises = [
                { id: 'thought-record', title: 'Thought Record', description: 'Challenge and reframe unhelpful thoughts' },
                { id: 'behavioral-activation', title: 'Behavioral Activation', description: 'Plan activities that improve your mood' },
                { id: 'mood-monitoring', title: 'Mood Monitoring', description: 'Track patterns in your emotional experiences' },
                { id: 'problem-solving', title: 'Problem Solving', description: 'Break down challenges into manageable steps' }
            ];

            const handleThoughtRecordSubmit = () => {
                if (thoughtRecord.situation && thoughtRecord.thoughts) {
                    alert('Thought record saved! This exercise helps you identify and challenge unhelpful thinking patterns.');
                    setThoughtRecord({
                        situation: '', thoughts: '', emotions: '', behaviors: '',
                        evidence_for: '', evidence_against: '', balanced_thought: ''
                    });
                    setActiveExercise(null);
                }
            };

            return (
                <div className="space-y-6">
                    <div className="card p-6">
                        <h2 className="text-2xl font-bold text-gray-900 mb-4">CBT Exercises</h2>
                        <p className="text-gray-600">Evidence-based cognitive behavioral therapy tools to help you manage your thoughts and emotions.</p>
                    </div>

                    {!activeExercise ? (
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {exercises.map(exercise => (
                                <div key={exercise.id} className="card p-6">
                                    <h3 className="text-xl font-semibold text-gray-900 mb-2">{exercise.title}</h3>
                                    <p className="text-gray-600 mb-4">{exercise.description}</p>
                                    <button
                                        onClick={() => setActiveExercise(exercise.id)}
                                        className="btn-primary"
                                    >
                                        Start Exercise
                                    </button>
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div className="card p-6">
                            <div className="flex items-center justify-between mb-6">
                                <h3 className="text-xl font-semibold text-gray-900">Thought Record Exercise</h3>
                                <button
                                    onClick={() => setActiveExercise(null)}
                                    className="btn-secondary"
                                >
                                    Back to Exercises
                                </button>
                            </div>

                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Situation</label>
                                    <textarea
                                        value={thoughtRecord.situation}
                                        onChange={(e) => setThoughtRecord({...thoughtRecord, situation: e.target.value})}
                                        placeholder="What happened? Describe the specific situation objectively."
                                        className="w-full p-3 border border-gray-300 rounded-lg"
                                        rows="3"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Automatic Thoughts</label>
                                    <textarea
                                        value={thoughtRecord.thoughts}
                                        onChange={(e) => setThoughtRecord({...thoughtRecord, thoughts: e.target.value})}
                                        placeholder="What went through your mind? What thoughts occurred automatically?"
                                        className="w-full p-3 border border-gray-300 rounded-lg"
                                        rows="3"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Emotions</label>
                                    <textarea
                                        value={thoughtRecord.emotions}
                                        onChange={(e) => setThoughtRecord({...thoughtRecord, emotions: e.target.value})}
                                        placeholder="What emotions did you feel? Rate intensity (1-10)."
                                        className="w-full p-3 border border-gray-300 rounded-lg"
                                        rows="2"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Evidence Against the Thought</label>
                                    <textarea
                                        value={thoughtRecord.evidence_against}
                                        onChange={(e) => setThoughtRecord({...thoughtRecord, evidence_against: e.target.value})}
                                        placeholder="What evidence contradicts your automatic thought?"
                                        className="w-full p-3 border border-gray-300 rounded-lg"
                                        rows="3"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Balanced Thought</label>
                                    <textarea
                                        value={thoughtRecord.balanced_thought}
                                        onChange={(e) => setThoughtRecord({...thoughtRecord, balanced_thought: e.target.value})}
                                        placeholder="What would be a more balanced, realistic way to think about this?"
                                        className="w-full p-3 border border-gray-300 rounded-lg"
                                        rows="3"
                                    />
                                </div>

                                <button
                                    onClick={handleThoughtRecordSubmit}
                                    className="btn-primary"
                                >
                                    Complete Exercise
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Crisis Support Component
        function CrisisSupport() {
            const [currentExercise, setCurrentExercise] = useState(null);
            const [breathingCount, setBreathingCount] = useState(0);

            const crisisResources = [
                { name: 'National Suicide Prevention Lifeline', phone: '988', description: '24/7 crisis support' },
                { name: 'Crisis Text Line', phone: 'Text HOME to 741741', description: 'Free 24/7 support via text' },
                { name: 'SAMHSA National Helpline', phone: '1-800-662-4357', description: 'Treatment referral and information' }
            ];

            const groundingExercises = [
                { id: '54321', name: '5-4-3-2-1 Grounding', description: 'Use your senses to ground yourself' },
                { id: 'breathing', name: '4-7-8 Breathing', description: 'Calm your nervous system' },
                { id: 'progressive', name: 'Progressive Muscle Relaxation', description: 'Release tension from your body' }
            ];

            const startBreathingExercise = () => {
                setCurrentExercise('breathing');
                setBreathingCount(0);
                const interval = setInterval(() => {
                    setBreathingCount(prev => {
                        if (prev >= 8) {
                            clearInterval(interval);
                            setCurrentExercise(null);
                            return 0;
                        }
                        return prev + 1;
                    });
                }, 1000);
            };

            return (
                <div className="space-y-6">
                    <div className="crisis-alert">
                        <div className="flex items-center mb-4">
                            <h2 className="text-2xl font-bold">Crisis Support</h2>
                        </div>
                        <p className="mb-4 opacity-90">
                            If you're in immediate danger or having thoughts of self-harm, please reach out for help immediately. 
                            You are not alone, and support is available 24/7.
                        </p>
                        <div className="bg-white bg-opacity-20 rounded-lg p-4">
                            <p className="font-semibold">Emergency: Call 911 or go to your nearest emergency room</p>
                        </div>
                    </div>

                    {/* Crisis Hotlines */}
                    <div className="card p-6">
                        <h3 className="text-xl font-semibold text-gray-900 mb-4">Crisis Hotlines</h3>
                        <div className="space-y-4">
                            {crisisResources.map((resource, index) => (
                                <div key={index} className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                    <div>
                                        <h4 className="font-medium text-gray-900">{resource.name}</h4>
                                        <p className="text-sm text-gray-600">{resource.description}</p>
                                    </div>
                                    <div className="text-lg font-bold text-blue-600">{resource.phone}</div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Grounding Exercises */}
                    <div className="card p-6">
                        <h3 className="text-xl font-semibold text-gray-900 mb-4">Grounding Exercises</h3>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                            {groundingExercises.map(exercise => (
                                <div key={exercise.id} className="p-4 border border-gray-200 rounded-lg">
                                    <h4 className="font-medium text-gray-900 mb-2">{exercise.name}</h4>
                                    <p className="text-sm text-gray-600 mb-3">{exercise.description}</p>
                                    <button
                                        onClick={() => exercise.id === 'breathing' ? startBreathingExercise() : setCurrentExercise(exercise.id)}
                                        className="btn-primary w-full"
                                    >
                                        Start Exercise
                                    </button>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Breathing Exercise */}
                    {currentExercise === 'breathing' && (
                        <div className="card p-6 text-center">
                            <h3 className="text-xl font-semibold text-gray-900 mb-4">4-7-8 Breathing Exercise</h3>
                            <div className="text-6xl font-bold text-blue-600 mb-4">{breathingCount}</div>
                            <p className="text-gray-600 mb-4">
                                {breathingCount <= 4 ? 'Inhale slowly...' : 
                                 breathingCount <= 7 ? 'Hold your breath...' : 
                                 'Exhale slowly...'}
                            </p>
                            <button
                                onClick={() => setCurrentExercise(null)}
                                className="btn-secondary"
                            >
                                Stop Exercise
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        // Goals Component
        function Goals({ goals, setGoals }) {
            const [newGoal, setNewGoal] = useState({ title: '', description: '', category: 'wellness' });
            const [showNewGoal, setShowNewGoal] = useState(false);

            const categories = [
                { id: 'wellness', label: 'Mental Wellness', color: 'bg-blue-100 text-blue-800' },
                { id: 'physical', label: 'Physical Health', color: 'bg-green-100 text-green-800' },
                { id: 'social', label: 'Social Connection', color: 'bg-purple-100 text-purple-800' },
                { id: 'personal', label: 'Personal Growth', color: 'bg-orange-100 text-orange-800' }
            ];

            const handleCreateGoal = () => {
                if (newGoal.title.trim()) {
                    const goal = {
                        id: Date.now(),
                        ...newGoal,
                        completed: false,
                        progress: 0,
                        createdAt: new Date().toISOString()
                    };
                    setGoals(prev => [goal, ...prev]);
                    setNewGoal({ title: '', description: '', category: 'wellness' });
                    setShowNewGoal(false);
                }
            };

            const handleUpdateGoal = (id, updates) => {
                setGoals(prev => prev.map(goal => 
                    goal.id === id ? { ...goal, ...updates } : goal
                ));
            };

            return (
                <div className="space-y-6">
                    <div className="card p-6">
                        <div className="flex items-center justify-between">
                            <div>
                                <h2 className="text-2xl font-bold text-gray-900">Goals & Habits</h2>
                                <p className="text-gray-600">Set and track your personal wellness goals</p>
                            </div>
                            <button
                                onClick={() => setShowNewGoal(true)}
                                className="btn-primary"
                            >
                                Add New Goal
                            </button>
                        </div>
                    </div>

                    {/* New Goal Form */}
                    {showNewGoal && (
                        <div className="card p-6">
                            <h3 className="text-xl font-semibold text-gray-900 mb-4">Create New Goal</h3>
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Goal Title</label>
                                    <input
                                        type="text"
                                        value={newGoal.title}
                                        onChange={(e) => setNewGoal({...newGoal, title: e.target.value})}
                                        placeholder="e.g., Practice mindfulness daily"
                                        className="w-full p-3 border border-gray-300 rounded-lg"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                    <textarea
                                        value={newGoal.description}
                                        onChange={(e) => setNewGoal({...newGoal, description: e.target.value})}
                                        placeholder="Describe your goal in detail..."
                                        className="w-full p-3 border border-gray-300 rounded-lg"
                                        rows="3"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Category</label>
                                    <select
                                        value={newGoal.category}
                                        onChange={(e) => setNewGoal({...newGoal, category: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg"
                                    >
                                        {categories.map(cat => (
                                            <option key={cat.id} value={cat.id}>{cat.label}</option>
                                        ))}
                                    </select>
                                </div>
                                <div className="flex space-x-3">
                                    <button onClick={handleCreateGoal} className="btn-primary">Create Goal</button>
                                    <button onClick={() => setShowNewGoal(false)} className="btn-secondary">Cancel</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Goals List */}
                    <div className="card p-6">
                        <h3 className="text-xl font-semibold text-gray-900 mb-4">Your Goals</h3>
                        {goals.length === 0 ? (
                            <p className="text-gray-600 text-center py-8">No goals yet. Create your first goal to get started!</p>
                        ) : (
                            <div className="space-y-4">
                                {goals.map(goal => {
                                    const category = categories.find(cat => cat.id === goal.category);
                                    return (
                                        <div key={goal.id} className="border border-gray-200 rounded-lg p-4">
                                            <div className="flex items-center justify-between mb-2">
                                                <h4 className="font-medium text-gray-900">{goal.title}</h4>
                                                <span className={`px-2 py-1 text-xs rounded-full ${category?.color}`}>
                                                    {category?.label}
                                                </span>
                                            </div>
                                            {goal.description && (
                                                <p className="text-gray-600 text-sm mb-3">{goal.description}</p>
                                            )}
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center space-x-2">
                                                    <button
                                                        onClick={() => handleUpdateGoal(goal.id, { completed: !goal.completed })}
                                                        className={`px-3 py-1 text-sm rounded-lg ${
                                                            goal.completed 
                                                                ? 'bg-green-100 text-green-800' 
                                                                : 'bg-gray-100 text-gray-800'
                                                        }`}
                                                    >
                                                        {goal.completed ? '✓ Completed' : 'Mark Complete'}
                                                    </button>
                                                </div>
                                                <div className="text-sm text-gray-500">
                                                    {new Date(goal.createdAt).toLocaleDateString()}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Settings Component
        function Settings() {
            const [settings, setSettings] = useState({
                notifications: true,
                darkMode: false,
                language: 'en',
                accessibility: false
            });

            const handleExportData = () => {
                const data = {
                    moodEntries: storage.load('moodEntries') || [],
                    journalEntries: storage.load('journalEntries') || [],
                    goals: storage.load('goals') || [],
                    settings: settings,
                    exportDate: new Date().toISOString()
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `mindspace-data-export-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                alert('Data exported successfully!');
            };

            const handleClearData = () => {
                if (confirm('Are you sure you want to delete all your data? This action cannot be undone.')) {
                    localStorage.clear();
                    alert('All data has been deleted.');
                    window.location.reload();
                }
            };

            return (
                <div className="space-y-6">
                    <div className="card p-6">
                        <h2 className="text-2xl font-bold text-gray-900 mb-4">Settings</h2>
                        <p className="text-gray-600">Customize your MindSpace experience</p>
                    </div>

                    {/* Privacy & Data */}
                    <div className="card p-6">
                        <h3 className="text-xl font-semibold text-gray-900 mb-4">Privacy & Data</h3>
                        <div className="space-y-4">
                            <div className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                <div>
                                    <h4 className="font-medium text-gray-900">Export Your Data</h4>
                                    <p className="text-sm text-gray-600">Download a copy of all your data in JSON format</p>
                                </div>
                                <button onClick={handleExportData} className="btn-primary">
                                    Export
                                </button>
                            </div>
                            
                            <div className="flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200">
                                <div>
                                    <h4 className="font-medium text-red-900">Delete All Data</h4>
                                    <p className="text-sm text-red-700">Permanently delete all your data</p>
                                </div>
                                <button onClick={handleClearData} className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* App Settings */}
                    <div className="card p-6">
                        <h3 className="text-xl font-semibold text-gray-900 mb-4">App Settings</h3>
                        <div className="space-y-4">
                            <div className="flex items-center justify-between">
                                <div>
                                    <h4 className="font-medium text-gray-900">Notifications</h4>
                                    <p className="text-sm text-gray-600">Receive reminders and updates</p>
                                </div>
                                <label className="relative inline-flex items-center cursor-pointer">
                                    <input
                                        type="checkbox"
                                        checked={settings.notifications}
                                        onChange={(e) => setSettings({...settings, notifications: e.target.checked})}
                                        className="sr-only peer"
                                    />
                                    <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div className="flex items-center justify-between">
                                <div>
                                    <h4 className="font-medium text-gray-900">Accessibility Mode</h4>
                                    <p className="text-sm text-gray-600">Enhanced accessibility features</p>
                                </div>
                                <label className="relative inline-flex items-center cursor-pointer">
                                    <input
                                        type="checkbox"
                                        checked={settings.accessibility}
                                        onChange={(e) => setSettings({...settings, accessibility: e.target.checked})}
                                        className="sr-only peer"
                                    />
                                    <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>

                    {/* About */}
                    <div className="card p-6">
                        <h3 className="text-xl font-semibold text-gray-900 mb-4">About MindSpace</h3>
                        <div className="space-y-2 text-gray-600">
                            <p><strong>Version:</strong> 1.0.0</p>
                            <p><strong>Features:</strong> All 10 required features implemented</p>
                            <p><strong>Privacy:</strong> All data stored locally in your browser</p>
                            <p><strong>Accessibility:</strong> Full accessibility support included</p>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        ReactDOM.render(<MindSpaceApp />, document.getElementById('root'));
    </script>
</body>
</html>
